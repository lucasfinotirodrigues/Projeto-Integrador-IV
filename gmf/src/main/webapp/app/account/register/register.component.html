<div class="content-login d-flex align-items-center">
  <img class="img-left" src="../../../content/images/background.svg" alt="icone">
  <div class="rigth">
    @if (!success()) {
    <form class="d-flex align-items-center flex-column gap-3" name="form" role="form" (ngSubmit)="register()" [formGroup]="registerForm">
      <h2>Cadastre-se</h2>
      <div class="form-group d-flex flex-column gap-2">
        <label for="login" >Nome</label>
        <input   
          type="text"
          class="form-control"
          id="login"
          name="login"
          placeholder="Insira seu primeiro nome"
          formControlName="login"
          data-cy="username"
          #login>
          @if (registerForm.get('login')!.invalid && (registerForm.get('login')!.dirty || registerForm.get('login')!.touched)) {
            <div>
              @if (registerForm.get('login')?.errors?.required) {
                <small class="form-text text-danger" jhiTranslate="register.messages.validate.login.required"
                  >Your username is required.</small
                >
              }

              @if (registerForm.get('login')?.errors?.minlength) {
                <small class="form-text text-danger" jhiTranslate="register.messages.validate.login.minlength"
                  >Your username is required to be at least 1 character.</small
                >
              }

              @if (registerForm.get('login')?.errors?.maxlength) {
                <small class="form-text text-danger" jhiTranslate="register.messages.validate.login.maxlength"
                  >Your username cannot be longer than 50 characters.</small
                >
              }

              @if (registerForm.get('login')?.errors?.pattern) {
                <small class="form-text text-danger" jhiTranslate="register.messages.validate.login.pattern"
                  >Your username is invalid.</small
                >
              }
            </div>
          }
      </div>
      <div class="form-group d-flex flex-column gap-2">
        <label for="email">E-mail</label>
        <input 
          type="email"
          class="form-control"
          id="email"
          name="email"
          placeholder="Insira seu e-mail"
          formControlName="email"
          data-cy="email"
          >
          @if (registerForm.get('email')!.invalid && (registerForm.get('email')!.dirty || registerForm.get('email')!.touched)) {
            <div>
              @if (registerForm.get('email')?.errors?.required) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.email.required"
                  >Your email is required.</small
                >
              }

              @if (registerForm.get('email')?.errors?.invalid) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.email.invalid">Your email is invalid.</small>
              }

              @if (registerForm.get('email')?.errors?.minlength) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.email.minlength"
                  >Your email is required to be at least 5 characters.</small
                >
              }

              @if (registerForm.get('email')?.errors?.maxlength) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.email.maxlength"
                  >Your email cannot be longer than 50 characters.</small
                >
              }
            </div>
          }
      </div>
      <div class="form-groups d-flex flex-column gap-2">
        <label for="password">Senha</label>
        <img class="image" [src]="mostrarSenha ?  '../../../content/images/unlock.svg' : '../../../content/images/Lock.svg' " (click)="visibilidadeSenha()"  alt="">
        <input 
          class="pass" 
          [type]="mostrarSenha ? 'text' : 'password'"
          id="password"
          name="password"
          placeholder="Insira sua senha"
          formControlName="password"
          data-cy="firstPassword"
          >

          @if (registerForm.get('password')!.invalid && (registerForm.get('password')!.dirty || registerForm.get('password')!.touched)) {
            <div>
              @if (registerForm.get('password')?.errors?.required) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.newpassword.required"
                  >Your password is required.</small
                >
              }

              @if (registerForm.get('password')?.errors?.minlength) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.newpassword.minlength"
                  >Your password is required to be at least 4 characters.</small
                >
              }

              @if (registerForm.get('password')?.errors?.maxlength) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.newpassword.maxlength"
                  >Your password cannot be longer than 50 characters.</small
                >
              }
            </div>
          }
          <jhi-password-strength-bar [passwordToCheck]="registerForm.get('password')!.value"></jhi-password-strength-bar>
         
      </div>
      <div class="form-groups d-flex flex-column gap-2">
        <label for="confirmPassword">Confirmar senha</label>
        <img 
          class="image" 
          [src]="mostrarConfirmSenha ?  
          '../../../content/images/unlock.svg' : '../../../content/images/Lock.svg' " 
          (click)="visibilidadeConfirmSenha()"  
          alt="icone"
          >
        <input 
          class="pass" 
          [type]="mostrarConfirmSenha ? 'text' : 'password'"
          id="confirmPassword"
          name="confirmPassword"
          placeholder="Insira novamente sua senha"
          formControlName="confirmPassword"
          data-cy="secondPassword"
          >

          @if (
            registerForm.get('confirmPassword')!.invalid &&
            (registerForm.get('confirmPassword')!.dirty || registerForm.get('confirmPassword')!.touched)
          ) {
            <div>
              @if (registerForm.get('confirmPassword')?.errors?.required) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.confirmpassword.required"
                  >Your confirmation password is required.</small
                >
              }

              @if (registerForm.get('confirmPassword')?.errors?.minlength) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.confirmpassword.minlength"
                  >Your confirmation password is required to be at least 4 characters.</small
                >
              }

              @if (registerForm.get('confirmPassword')?.errors?.maxlength) {
                <small class="form-text text-danger" jhiTranslate="global.messages.validate.confirmpassword.maxlength"
                  >Your confirmation password cannot be longer than 50 characters.</small
                >
              }
            </div>
          }
      </div>
      <button
        class="submit"
        type="submit"
        [disabled]="registerForm.invalid" 
        routerLink="/"
        >
        Cadastrar
      </button> 
      <div class="d-flex gap-2">
        <span class="gray">Você já possui conta?</span>
        <span routerLink="/" class="green">Entrar</span>
      </div>
    </form>
    }
  </div>
</div>

